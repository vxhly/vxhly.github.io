import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as e,d as i,a,e as t}from"./app-487b241d.js";const c="/assets/liunx-dns-1.png",p="/assets/liunx-dns-2.png",o="/assets/liunx-dns-3.png",l="/assets/liunx-dns-4.png",d="/assets/liunx-dns-5.png",r={},u=a("div",{class:"hint-container tip"},[a("p",{class:"hint-container-title"},"前言"),a("p",null,"这篇是 Liunx 的服务配置笔记系列第五篇, 这一篇将具体介绍 Red Hat Liunx 下 DNS 服务的安全配置。所谓 DNS 就是一个域名解析服务器, 其中 DNS 还包含正向解析和反向解析。")],-1),m=t(`<h2 id="服务的安装" tabindex="-1"><a class="header-anchor" href="#服务的安装" aria-hidden="true">#</a> 服务的安装</h2><h3 id="创建挂载目录" tabindex="-1"><a class="header-anchor" href="#创建挂载目录" aria-hidden="true">#</a> 创建挂载目录</h3><p><code>For Example:</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /mnt/cdrom
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="挂在光盘" tabindex="-1"><a class="header-anchor" href="#挂在光盘" aria-hidden="true">#</a> 挂在光盘</h3><p><code>For Example:</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mount</span> /dev/cdrom /mnt/cdrom
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h3><p><code>For Example:</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /mnt/cdrom/Server
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> bind-9.3.6-4.P1.el5_4.2.i386.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> caching-namedserver-9.3.6-4.P1.el5_4.2.i386.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+c+`" alt="DNS" tabindex="0" loading="lazy"><figcaption>DNS</figcaption></figure><h3 id="复制模板配置文件" tabindex="-1"><a class="header-anchor" href="#复制模板配置文件" aria-hidden="true">#</a> 复制模板配置文件</h3><p><code>For Example:</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /etc/
<span class="token function">cp</span> <span class="token parameter variable">-p</span> named.caching-nameserver.conf named.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+p+`" alt="DNS" tabindex="0" loading="lazy"><figcaption>DNS</figcaption></figure><p>复制的时候, 建议带上 <code>-p</code> 选项, 否则不能使用该文件, 如果忘记加上 <code>-p</code> 选项, 不要紧, 使用以下命令还可以挽救。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chown</span> named:named named.conf
<span class="token function">chown</span> named:named named.zones
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安全配置" tabindex="-1"><a class="header-anchor" href="#安全配置" aria-hidden="true">#</a> 安全配置</h2><h3 id="限制递归查询功能" tabindex="-1"><a class="header-anchor" href="#限制递归查询功能" aria-hidden="true">#</a> 限制递归查询功能</h3><p>默认没有这个功能, 需要手动添加。递归查询指 一般客户机和服务器之间属 递归查询 , 即当客户机向 DNS 服务器发 出请求后, 若 DNS 服务器本身不能解析, 则会向另外的 DNS 服务 器发出查询请求, 得到结果后转交给客户机。<br> 这个选项, 即可填 IP 地址, 也可以填网络段, 当然也可以填 any（所有）。</p><p>修改主配置文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>allow-recursion <span class="token punctuation">{</span> <span class="token number">192.168</span>.199.0/24<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment"># 限制网段查询</span>
allow-recursion <span class="token punctuation">{</span> <span class="token number">192.168</span>.199.2<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>     <span class="token comment"># 限制 IP 查询</span>
allow-recursion <span class="token punctuation">{</span> any<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>               <span class="token comment"># 所有的都可以查询</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+o+`" alt="DNS" tabindex="0" loading="lazy"><figcaption>DNS</figcaption></figure><h3 id="限制查询" tabindex="-1"><a class="header-anchor" href="#限制查询" aria-hidden="true">#</a> 限制查询</h3><p><code>Default Configuration:</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>allow-query <span class="token punctuation">{</span> localhost<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>allow-query 配置项用来设置允许 DNS 查询的客户端地址, 默认的客户端地址为本机。这里可以设置为某个网段、所有、具体的某台主机三种情况。</p><p>修改主配置文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>allow-query <span class="token punctuation">{</span> <span class="token number">192.168</span>.199.0/24<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment"># 限制网段查询</span>
allow-query <span class="token punctuation">{</span> <span class="token number">192.168</span>.199.2<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>     <span class="token comment"># 限制 IP 查询</span>
allow-query <span class="token punctuation">{</span> any<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>               <span class="token comment"># 所有的都可以查询</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+l+`" alt="DNS" tabindex="0" loading="lazy"><figcaption>DNS</figcaption></figure><h3 id="限制区传送" tabindex="-1"><a class="header-anchor" href="#限制区传送" aria-hidden="true">#</a> 限制区传送</h3><p>默认没有这个功能, 需要手动添加。如果没有限制区传送, 那么 DNS 服务器允许对任何人都进行区域传输, 因此网络架构中的主机名、主机 IP 列表、路由器名和路由 IP 列表, 甚至包括各主机所在的位置和硬件配置等情况都很容易被入侵者得到在 DNS 配置文件中通过设置来限制允许区传送的主机, 从一定程度上能减轻信息泄漏。</p><p>修改主配置文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>allow-transfer<span class="token punctuation">{</span> <span class="token number">192.168</span>.199.0/24<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   <span class="token comment"># 限制网段查询</span>
allow-transfer <span class="token punctuation">{</span> <span class="token number">192.168</span>.199.2<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>     <span class="token comment"># 限制 IP 查询</span>
allow-transfer <span class="token punctuation">{</span> any<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>               <span class="token comment"># 所有的都可以查询</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+d+'" alt="DNS" tabindex="0" loading="lazy"><figcaption>DNS</figcaption></figure>',35);function h(v,b){return s(),e("div",null,[u,i(" more "),m])}const f=n(r,[["render",h],["__file","liunx-service-dns.html.vue"]]);export{f as default};
