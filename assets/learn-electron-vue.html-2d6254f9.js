import{_ as i}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o as l,c,d as r,a as n,b as s,f as e,w as u,e as a}from"./app-89f8fb1f.js";const d="/assets/electron-1.png",k="/assets/electron-2.png",v="/assets/electron-3.png",m="/assets/electron-4.png",b="/assets/electron-5.png",g={},h=n("div",{class:"hint-container tip"},[n("p",{class:"hint-container-title"},"前言"),n("p",null,"记录学习 electron-vue 时遇到的一些坑, 从报错或者日常需求上出发找寻解决方案。")],-1),y=a(`<h2 id="坑一" tabindex="-1"><a class="header-anchor" href="#坑一" aria-hidden="true">#</a> 坑一</h2><p>一般的高版本的 node, 大于 12 的版本时候。初步运行 electron-vue 项目时候会报错！</p><div class="hint-container danger"><p class="hint-container-title">报错特征</p><p>ERROR in Template execution failed: ReferenceError: process is not defined</p><p>ERROR in ReferenceError: process is not defined</p><ul><li><p>index.ejs:102</p><p>/Users/codeman/github/my-project/src/index.ejs:102:2</p></li><li><p>index.ejs:107 module.exports</p><p>/Users/codeman/github/my-project/src/index.ejs:107:3</p></li><li><p>index.js:284</p><p>[my-project]/[html-webpack-plugin]/index.js:284:18</p></li></ul></div><h3 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案" aria-hidden="true">#</a> 解决方案</h3><p>修改 <code>.electron-vue/webpack.renderer.config.js</code> 和 <code>.electron-vue/webpack.web.config.js</code> 如下：</p><p><code>.electron-vue/webpack.renderer.config.js</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src/index.ejs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">collapseWhitespace</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">removeAttributeQuotes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">removeComments</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">templateParameters</span><span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> assets<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">compilation</span><span class="token operator">:</span> compilation<span class="token punctuation">,</span>
      <span class="token literal-property property">webpack</span><span class="token operator">:</span> compilation<span class="token punctuation">.</span><span class="token function">getStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">webpackConfig</span><span class="token operator">:</span> compilation<span class="token punctuation">.</span>options<span class="token punctuation">,</span>
      <span class="token literal-property property">htmlWebpackPlugin</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">files</span><span class="token operator">:</span> assets<span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> options<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      process<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">nodeModules</span><span class="token operator">:</span>
    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&quot;production&quot;</span>
      <span class="token operator">?</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../node_modules&quot;</span><span class="token punctuation">)</span>
      <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>.electron-vue/webpack.web.config.js</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src/index.ejs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">templateParameters</span><span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> assets<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">compilation</span><span class="token operator">:</span> compilation<span class="token punctuation">,</span>
      <span class="token literal-property property">webpack</span><span class="token operator">:</span> compilation<span class="token punctuation">.</span><span class="token function">getStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">webpackConfig</span><span class="token operator">:</span> compilation<span class="token punctuation">.</span>options<span class="token punctuation">,</span>
      <span class="token literal-property property">htmlWebpackPlugin</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">files</span><span class="token operator">:</span> assets<span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> options<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      process<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">collapseWhitespace</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">removeAttributeQuotes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">removeComments</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">nodeModules</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="坑二" tabindex="-1"><a class="header-anchor" href="#坑二" aria-hidden="true">#</a> 坑二</h2><p>在初步使用 <code>electron-builder</code> 编译 electron-vue 项目时候会报错（PS：一般出现在 MacOS 下）</p><div class="hint-container danger"><p class="hint-container-title">报错特征</p><p>Error: Exit code: 2. Command failed: /usr/bin/perl /private/var/folders/mj/n34f_bp95zq2_1fwll3bq70m0000gn/T/t-51hskU/1-dmgProperties.pl Can&#39;t locate Mac/Memory.pm in @INC (you may need to install the Mac:: Memory module) (@INC contains: /Library/Perl/5.18/darwin-thread-multi-2level /Library/Perl/5.18 /Network/Library/Perl/5.18/darwin-thread-multi-2level /Network/Library/Perl/5.18 /Library/Perl/Updates/5.18.4 /System/Library/Perl/5.18/darwin-thread-multi-2level /System/Library/Perl/5.18 /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level /System/Library/Perl/Extras/5.18 .) at /private/var/folders/mj/n34f_bp95zq2_1fwll3bq70m0000gn/T/t-51hskU/1-dmgProperties.pl line 4. BEGIN failed--compilation aborted at /private/var/folders/mj/n34f_bp95zq2_1fwll3bq70m0000gn/T/t-51hskU/1-dmgProperties.pl line 4.</p></div><h3 id="解决方案-1" tabindex="-1"><a class="header-anchor" href="#解决方案-1" aria-hidden="true">#</a> 解决方案</h3><p>升级你的 <code>electron-builder</code> 依赖包</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> electron-builder@latest <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="坑三" tabindex="-1"><a class="header-anchor" href="#坑三" aria-hidden="true">#</a> 坑三</h2>`,16),f=n("code",null,"node-sass",-1),q=n("code",null,"Dart Sass",-1),_=a(`<h3 id="解决方案-2" tabindex="-1"><a class="header-anchor" href="#解决方案-2" aria-hidden="true">#</a> 解决方案</h3><p>删除你的原有的 <code>node-sass</code> 依赖项, <code>node-sass</code> 和 <code>Dart Sass</code> 几乎无缝转换, 所以不用担心兼容问题</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> sass <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="坑四" tabindex="-1"><a class="header-anchor" href="#坑四" aria-hidden="true">#</a> 坑四</h2><p>CI 自动编译时会报 <code>Node.js</code> 的版本过低, 导致编译错误, <code>Travis CI</code> 平台上的日志特征</p>`,5),x={class:"hint-container danger"},w=n("p",{class:"hint-container-title"},"报错特征",-1),j={href:"https://yarnpkg.com/en/docs/cli/install",target:"_blank",rel:"noopener noreferrer"},C=a(`<h3 id="解决方案-3" tabindex="-1"><a class="header-anchor" href="#解决方案-3" aria-hidden="true">#</a> 解决方案</h3><p>建议在 <code>.travis.yml</code> 和 <code>appveyor.yml</code> 中修改 <code>Node.js</code> 的版本</p><p><code>.travis.yml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">osx_image</span><span class="token punctuation">:</span> xcode8.3
<span class="token key atrule">sudo</span><span class="token punctuation">:</span> required
<span class="token key atrule">dist</span><span class="token punctuation">:</span> trusty
<span class="token key atrule">language</span><span class="token punctuation">:</span> c
<span class="token key atrule">matrix</span><span class="token punctuation">:</span>
  <span class="token key atrule">include</span><span class="token punctuation">:</span>

  <span class="token key atrule">+ os</span><span class="token punctuation">:</span> osx

  <span class="token comment"># - os: linux</span>
    <span class="token key atrule">env</span><span class="token punctuation">:</span> CC=clang CXX=clang++ npm_config_clang=1
    <span class="token key atrule">compiler</span><span class="token punctuation">:</span> clang
<span class="token key atrule">cache</span><span class="token punctuation">:</span>
  <span class="token key atrule">directories</span><span class="token punctuation">:</span>

  + node_modules
  + &quot;$HOME/.electron&quot;
  + &quot;$HOME/.cache&quot;

<span class="token key atrule">addons</span><span class="token punctuation">:</span>
  <span class="token key atrule">apt</span><span class="token punctuation">:</span>
    <span class="token key atrule">packages</span><span class="token punctuation">:</span>

    <span class="token punctuation">-</span> libgnome<span class="token punctuation">-</span>keyring<span class="token punctuation">-</span>dev
    <span class="token punctuation">-</span> icnsutils

<span class="token key atrule">before_install</span><span class="token punctuation">:</span>

* mkdir <span class="token punctuation">-</span>p /tmp/git<span class="token punctuation">-</span>lfs <span class="token important">&amp;&amp;</span> curl <span class="token punctuation">-</span>L https<span class="token punctuation">:</span>//github.com/github/git<span class="token punctuation">-</span>lfs/releases/download/v1.2.1/git<span class="token punctuation">-</span>lfs<span class="token punctuation">-</span>$(<span class="token punctuation">[</span>

  &quot;$TRAVIS_OS_NAME&quot; == &quot;linux&quot; <span class="token punctuation">]</span> <span class="token important">&amp;&amp;</span> echo &quot;linux&quot; <span class="token punctuation">|</span><span class="token punctuation">|</span> echo &quot;darwin&quot;)<span class="token punctuation">-</span>amd64<span class="token punctuation">-</span>1.2.1.tar.gz
  <span class="token punctuation">|</span> tar <span class="token punctuation">-</span>xz <span class="token punctuation">-</span>C /tmp/git<span class="token punctuation">-</span>lfs <span class="token punctuation">-</span><span class="token punctuation">-</span>strip<span class="token punctuation">-</span>components 1 <span class="token important">&amp;&amp;</span> /tmp/git<span class="token punctuation">-</span>lfs/git<span class="token punctuation">-</span>lfs pull

* if <span class="token punctuation">[</span><span class="token punctuation">[</span> &quot;$TRAVIS_OS_NAME&quot; == &quot;linux&quot; <span class="token punctuation">]</span><span class="token punctuation">]</span>; then sudo apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span><span class="token punctuation">-</span>no<span class="token punctuation">-</span>install<span class="token punctuation">-</span>recommends <span class="token punctuation">-</span>y icnsutils graphicsmagick xz<span class="token punctuation">-</span>utils; fi

<span class="token key atrule">install</span><span class="token punctuation">:</span>

* nvm install 12
* curl <span class="token punctuation">-</span>o<span class="token punctuation">-</span> <span class="token punctuation">-</span>L https<span class="token punctuation">:</span>//yarnpkg.com/install.sh <span class="token punctuation">|</span> bash
* source ~/.bashrc
* npm install <span class="token punctuation">-</span>g xvfb<span class="token punctuation">-</span>maybe
* yarn install

<span class="token key atrule">script</span><span class="token punctuation">:</span>

* yarn run release

<span class="token key atrule">branches</span><span class="token punctuation">:</span>
  <span class="token key atrule">only</span><span class="token punctuation">:</span>

  + master

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>appveyor.yml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> 0.1.<span class="token punctuation">{</span>build<span class="token punctuation">}</span>

<span class="token key atrule">branches</span><span class="token punctuation">:</span>
  <span class="token key atrule">only</span><span class="token punctuation">:</span>

    <span class="token punctuation">-</span> master

<span class="token key atrule">image</span><span class="token punctuation">:</span> Visual Studio 2017
<span class="token key atrule">platform</span><span class="token punctuation">:</span>

  + x64

<span class="token key atrule">cache</span><span class="token punctuation">:</span>

  + node_modules
  + &#39;%APPDATA%\\npm<span class="token punctuation">-</span>cache&#39;
  + &#39;%USERPROFILE%\\.electron&#39;
  + &#39;%USERPROFILE%\\AppData\\Local\\Yarn\\cache&#39;

<span class="token key atrule">init</span><span class="token punctuation">:</span>

  + git config <span class="token punctuation">-</span><span class="token punctuation">-</span>global core.autocrlf input

<span class="token key atrule">install</span><span class="token punctuation">:</span>

  <span class="token key atrule">+ ps</span><span class="token punctuation">:</span> Install<span class="token punctuation">-</span>Product node 12 x64
  + git reset <span class="token punctuation">-</span><span class="token punctuation">-</span>hard HEAD
  + yarn install
  + node <span class="token punctuation">-</span><span class="token punctuation">-</span>version

<span class="token key atrule">build_script</span><span class="token punctuation">:</span>

  + yarn run release

<span class="token key atrule">test</span><span class="token punctuation">:</span> off

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="坑五" tabindex="-1"><a class="header-anchor" href="#坑五" aria-hidden="true">#</a> 坑五</h2><p>CI 自动编译成功但是并未成功发布到 GitHub 上, <code>Appveyor CI</code> 平台上的日志特征</p><div class="hint-container danger"><p class="hint-container-title">报错特征</p><p>• publishing publisher=Github (owner: vxhly, project: demo, version: 0.0.1) • uploading file=demo-setup-0.0.1.exe.blockmap provider=GitHub • uploading file=demo-setup-0.0.1.exe provider=GitHub • skipped publishing file=demo-setup-0.0.1.exe.blockmap reason=release doesn&#39;t exist and not created because &quot;publish&quot; is not &quot;always&quot; and build is not on tag tag=v0.0.1 version=0.0.1 • skipped publishing file=demo-setup-0.0.1.exe reason=release doesn&#39;t exist and not created because &quot;publish&quot; is not &quot;always&quot; and build is not on tag tag=v0.0.1 version=0.0.1 • skipped publishing file=latest.yml reason=release doesn&#39;t exist and not created because &quot;publish&quot; is not &quot;always&quot; and build is not on tag tag=v0.0.1 version=0.0.1 Done in 128.39s. Updating build cache... Cache &#39;node_modules&#39; - Updated Cache entry not found: C:\\Users\\appveyor\\AppData\\Roaming\\npm-cache Cache &#39;C:\\Users\\appveyor.electron&#39; - Updated Cache &#39;C:\\Users\\appveyor\\AppData\\Local\\Yarn\\cache&#39; - Updated Build success</p></div><h3 id="解决方案-4" tabindex="-1"><a class="header-anchor" href="#解决方案-4" aria-hidden="true">#</a> 解决方案</h3><p>可能原因一：自带的 <code>npm run build</code> 这个脚本让 CI 去执行构建, 但是发现无法自动上传到 GitHub 的 release 里可能原因二：未发布 tag</p><p>步骤一：在 <code>package.json</code> 中配置运行 <code>script</code></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;release&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node .electron-vue/build.js &amp;&amp; electron-builder&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;patch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm version patch &amp;&amp; git push origin master &amp;&amp; git push origin --tags&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;minor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm version minor &amp;&amp; git push origin master &amp;&amp; git push origin --tags&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;major&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm version major &amp;&amp; git push origin master &amp;&amp; git push origin --tags&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>步骤二：修改 <code>.travis.yml</code> 和 <code>appveyor.yml</code> 文件（PS：在坑四中已体现, 这边就不重复了）</p><h2 id="坑六" tabindex="-1"><a class="header-anchor" href="#坑六" aria-hidden="true">#</a> 坑六</h2><p>在 Windows 下打包之后, 未能正确的显示安装路径而是直接安装</p><h3 id="解决方案-5" tabindex="-1"><a class="header-anchor" href="#解决方案-5" aria-hidden="true">#</a> 解决方案</h3><p>在 <code>package.json</code> 中修改</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;win&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;build/icons/icon.ico&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nsis&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;arch&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ia32&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nsis&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;oneClick&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;allowElevation&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;allowToChangeInstallationDirectory&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;installerIcon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;build/icons/icon.ico&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;uninstallerIcon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;build/icons/icon.ico&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;installerHeaderIcon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;build/icons/icon.ico&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;createDesktopShortcut&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;createStartMenuShortcut&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;displayLanguageSelector&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;multiLanguageInstaller&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;installerLanguages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;en_US&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zh_CN&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;warningsAsErrors&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="坑七" tabindex="-1"><a class="header-anchor" href="#坑七" aria-hidden="true">#</a> 坑七</h2><p><code>MacOS</code> 下打包未能正确识别到签名证书, 报错特征</p>`,21),E={class:"hint-container danger"},I=n("p",{class:"hint-container-title"},"报错特征",-1),P={href:"https://electron.build/code-signing",target:"_blank",rel:"noopener noreferrer"},S=n("pre",null,[n("code",null,`                                               0 identities found

                                            Valid identities only
                                               0 valid identities found
`)],-1),D=a('<h3 id="解决方案-6" tabindex="-1"><a class="header-anchor" href="#解决方案-6" aria-hidden="true">#</a> 解决方案</h3><p>使用 <code>X-code</code> 进行 mac 版本上代码签名</p><ol><li>打开 xcode 主界面</li><li>Xcode==&gt;Preferences…</li></ol><figure><img src="'+d+'" alt="electron-mac" tabindex="0" loading="lazy"><figcaption>electron-mac</figcaption></figure><ol start="3"><li>Accounts==&gt;Apple IDs==&gt;Manage Certificates…, 如果没有登录的话, 先登录 Apple ID, 注意一定要登录开发者账号。登录成功后再进行 Manage Certificates；</li></ol><figure><img src="'+k+'" alt="electron-mac" tabindex="0" loading="lazy"><figcaption>electron-mac</figcaption></figure><ol start="4"><li>添加“+”Developer ID Application,注意一定要添加 Developer ID Application 到钥匙串中, 不要选错了。</li></ol><figure><img src="'+v+'" alt="electron-mac" tabindex="0" loading="lazy"><figcaption>electron-mac</figcaption></figure><ol start="5"><li>成功添加到钥匙串我的证书中, 经过以上的步骤可以成功添加一个证书到钥匙串中的我的证书中。</li></ol><figure><img src="'+m+'" alt="electron-mac" tabindex="0" loading="lazy"><figcaption>electron-mac</figcaption></figure><figure><img src="'+b+'" alt="electron-mac" tabindex="0" loading="lazy"><figcaption>electron-mac</figcaption></figure><ol start="6"><li>正确签名之后, 打包成功！</li></ol>',12);function A(L,N){const o=p("RouterLink"),t=p("ExternalLinkIcon");return l(),c("div",null,[h,r(" more "),y,n("p",null,[s("默认项目配置的 sass/scss 编译器为 "),f,s(" , 该编译器在 Windows 环境下及其的不友好, 所以这里比较推荐的是使用 "),q,s(" , 有兴趣的小伙伴传送门在这里 "),e(o,{to:"/views/manual/usage-of-docker.html#%E6%8B%93%E5%B1%95-2"},{default:u(()=>[s("为啥要用 Dart sass")]),_:1})]),_,n("div",x,[w,n("p",null,[s('$ yarn yarn install v1.19.2 warning You are using Node "7.10.1" which is not supported and may encounter bugs or unexpected behavior. Yarn supports the following semver range: "^4.8.0 || ^5.7.0 || ^6.2.2 || >=8.0.0" warning package.json: No license field warning demo@0.0.1: No license field [1/4] Resolving packages... [2/4] Fetching packages... error getmac@4.3.0: The engine "node" is incompatible with this module. Expected version ">=8". Got "7.10.1" error Found incompatible module. info Visit '),n("a",j,[s("https://yarnpkg.com/en/docs/cli/install"),e(t)]),s(' for documentation about this command. The command "yarn" failed and exited with 1 during . Your build has been stopped.')])]),C,n("div",E,[I,n("p",null,[s('• electron-builder version=21.2.0 os=19.0.0 • loaded configuration file=package.json ("build" field) • writing effective config file=build/builder-effective-config.yaml • rebuilding native dependencies dependencies=grpc@1.24.2 platform=darwin arch=x64 • rebuilding native dependency name=grpc version=1.24.2 • packaging platform=darwin arch=x64 electron=2.0.18 appOutDir=build/mac • skipped macOS application code signing reason=cannot find valid "Developer ID Application" identity or custom non-Apple code signing certificate, see '),n("a",P,[s("https://electron.build/code-signing"),e(t)]),s(" allIdentities=")]),S]),D])}const M=i(g,[["render",A],["__file","learn-electron-vue.html.vue"]]);export{M as default};
