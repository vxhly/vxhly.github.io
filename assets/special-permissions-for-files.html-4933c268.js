import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as e,d as i,a,e as t}from"./app-89f8fb1f.js";const c="/assets/setuid-1.png",d="/assets/setuid-2.png",o="/assets/setgid.png",l="/assets/sticky-bit.png",p={},r=a("div",{class:"hint-container tip"},[a("p",{class:"hint-container-title"},"前言"),a("p",null,"本篇是 Liunx 的学习笔记系列第七篇, 在 Liunx 中文件除了 rwx 权限, 还存在 SetUID 、 SetGID 、 Sicky BIT 特殊权限, 本篇就是来介绍这些特殊权限。")],-1),u=t('<h2 id="setuid" tabindex="-1"><a class="header-anchor" href="#setuid" aria-hidden="true">#</a> SetUID</h2><h3 id="针对文件的作用" tabindex="-1"><a class="header-anchor" href="#针对文件的作用" aria-hidden="true">#</a> 针对文件的作用</h3><ul><li>只有可以执行的二进制程序才能设定 SUID 权限</li><li>命令执行者要对该程序用于 x（执行）权限</li><li>命令执行者在执行该程序是获得该程序文件属主的身份（在执行程序的过程中灵魂附体成文件的属主）</li><li>SetUID 权限只在该程序执行过程中有效, 也就是说身份改变只在程序执行过程中有效</li></ul><h3 id="概念图" tabindex="-1"><a class="header-anchor" href="#概念图" aria-hidden="true">#</a> 概念图</h3><figure><img src="'+c+`" alt="SetUID" tabindex="0" loading="lazy"><figcaption>SetUID</figcaption></figure><h3 id="设置-suid" tabindex="-1"><a class="header-anchor" href="#设置-suid" aria-hidden="true">#</a> 设置 SUID</h3><p>只能针对二进制可执行文件</p><h4 id="_4-代表-suid" tabindex="-1"><a class="header-anchor" href="#_4-代表-suid" aria-hidden="true">#</a> 4 代表 SUID</h4><p><code>Command Format:</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token number">4777</span> <span class="token punctuation">[</span>fileName<span class="token punctuation">]</span>     <span class="token comment"># 设置 SUID 权限</span>
<span class="token function">chmod</span> <span class="token number">644</span> <span class="token punctuation">[</span>fileName<span class="token punctuation">]</span>      <span class="token comment"># 取消 SUID 权限</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>当然还可以用以下命令设置, <code>Command Format:</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> u+s <span class="token punctuation">[</span>fileName<span class="token punctuation">]</span>      <span class="token comment"># 设置 SUID 权限</span>
<span class="token function">chmod</span> u-s <span class="token punctuation">[</span>fileName<span class="token punctuation">]</span>      <span class="token comment"># 取消 SUID 权限</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="s-与-s-的区别" tabindex="-1"><a class="header-anchor" href="#s-与-s-的区别" aria-hidden="true">#</a> S 与 s 的区别</h4><div class="hint-container tip"><p class="hint-container-title">提示</p><p>区别大写 <code>S</code> 其实是报错, 因为我们用来测试的文件并非二进制文件, 或者说是可执行程序, 只需添加 x 权限即可变为小写 <code>s</code> , 实际上生效的是小写 <code>s</code></p></div><p><code>For Examlpe:</code> <br></p><figure><img src="`+d+`" alt="SetUID" tabindex="0" loading="lazy"><figcaption>SetUID</figcaption></figure><h3 id="危险的-setuid" tabindex="-1"><a class="header-anchor" href="#危险的-setuid" aria-hidden="true">#</a> 危险的 SetUID</h3><ul><li>关键目录应严格控制写权限。比如 <code>“/”</code> 、 <code>”/usr“</code> 等</li><li>用户的密码设置要严格遵守密码三原则</li><li>对系统中默认应该具有 SetUID 权限的文件作一列表, 定时检查没有这个之外的文件是否被设置了 SetUID 权限</li></ul><h2 id="setgid" tabindex="-1"><a class="header-anchor" href="#setgid" aria-hidden="true">#</a> SetGID</h2><p>既可以针对二进制可执行文件, 也可以针对目录</p><h3 id="针对文件的作用-1" tabindex="-1"><a class="header-anchor" href="#针对文件的作用-1" aria-hidden="true">#</a> 针对文件的作用</h3><ul><li>只有可以执行的二进制程序才能设定 SGID 权限</li><li>命令执行者要对该程序用于 x（执行）权限</li><li>命令执行者在执行该程序的时候, 组身份升级为该程序的属组</li><li>SetUID 权限同样只在该程序执行过程中有效, 也就是说组身份改变只在程序执行过成中有效</li></ul><h3 id="针对目录的作用" tabindex="-1"><a class="header-anchor" href="#针对目录的作用" aria-hidden="true">#</a> 针对目录的作用</h3><ul><li>普通用户必须对此目录拥有 r 和 x 权限, 才能进入此目录</li><li>普通用户在此目录中的有效组会变成此目录的属组</li><li>若普通用户对此目录拥有 w 权限时, 新建的文件的默认属组是这个目录的属组</li></ul><h3 id="设置-sgid" tabindex="-1"><a class="header-anchor" href="#设置-sgid" aria-hidden="true">#</a> 设置 SGID</h3><h4 id="_2-代表-sgid" tabindex="-1"><a class="header-anchor" href="#_2-代表-sgid" aria-hidden="true">#</a> 2 代表 SGID</h4><p><code>Command Format:</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token number">2777</span> <span class="token punctuation">[</span>fileName<span class="token punctuation">]</span>      <span class="token comment"># 设置 SGID 权限</span>
<span class="token function">chmod</span> <span class="token number">644</span> <span class="token punctuation">[</span>fileName<span class="token punctuation">]</span>       <span class="token comment"># 取消 SGID 权限</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>当然还可以用以下命令设置, <code>Command Format:</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> g+s <span class="token punctuation">[</span>fileName<span class="token punctuation">]</span>       <span class="token comment"># 设置 SGID 权限</span>
<span class="token function">chmod</span> g-s <span class="token punctuation">[</span>fileName<span class="token punctuation">]</span>      <span class="token comment"># 取消 SGID 权限</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="s-与-s-的区别-1" tabindex="-1"><a class="header-anchor" href="#s-与-s-的区别-1" aria-hidden="true">#</a> S 与 s 的区别</h4><div class="hint-container tip"><p class="hint-container-title">提示</p><p>区别大写 S 其实是报错, 因为我们用来测试的文件并非二进制文件, 或者说是可执行程序, 只需添加 x 权限即可变为小写 s</p></div><p><code>For Examlpe:</code> <br></p><figure><img src="`+o+`" alt="SetUID" tabindex="0" loading="lazy"><figcaption>SetUID</figcaption></figure><h2 id="sicky-bit" tabindex="-1"><a class="header-anchor" href="#sicky-bit" aria-hidden="true">#</a> Sicky BIT</h2><p>只能针对目录</p><h3 id="针对目录的作用-1" tabindex="-1"><a class="header-anchor" href="#针对目录的作用-1" aria-hidden="true">#</a> 针对目录的作用</h3><h3 id="设置-sbit" tabindex="-1"><a class="header-anchor" href="#设置-sbit" aria-hidden="true">#</a> 设置 SBIT</h3><ul><li>粘着位目前对目录有效</li><li>普通用户对该目录拥有 w 和 x 权限, 即普通用户可以在此目录拥有写入权限</li><li>如果没有粘着位, 因为普通用户拥有 w 权限, 所以可以删除此目录下所有文件, 包括其他用户建立的文件。一但赋予粘着位, 除了 root 可以删除所有文件, 普通用户就算拥有 w 权限, 也只能删除自己建立的文件, 但是不能删除其他用户建立的文件</li></ul><h4 id="_1-代表-sbit" tabindex="-1"><a class="header-anchor" href="#_1-代表-sbit" aria-hidden="true">#</a> 1 代表 SBIT</h4><p><code>Command Format:</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token number">1777</span> <span class="token punctuation">[</span>folderName<span class="token punctuation">]</span>       <span class="token comment"># 设置 SBIT 权限</span>
<span class="token function">chmod</span> <span class="token number">644</span> <span class="token punctuation">[</span>folderName<span class="token punctuation">]</span>        <span class="token comment"># 取消 SBIT 权限</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>当然还可以用以下命令设置, <code>Command Format:</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> o+s <span class="token punctuation">[</span>folderName<span class="token punctuation">]</span>       <span class="token comment"># 设置 SBIT 权限</span>
<span class="token function">chmod</span> o-t <span class="token punctuation">[</span>folderName<span class="token punctuation">]</span>       <span class="token comment"># 取消 SBIT 权限</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="举例" tabindex="-1"><a class="header-anchor" href="#举例" aria-hidden="true">#</a> 举例</h4><p><code>For Examlpe:</code> <br></p><figure><img src="`+l+'" alt="SetUID" tabindex="0" loading="lazy"><figcaption>SetUID</figcaption></figure>',47);function h(m,b){return s(),e("div",null,[r,i(" more "),u])}const k=n(p,[["render",h],["__file","special-permissions-for-files.html.vue"]]);export{k as default};
