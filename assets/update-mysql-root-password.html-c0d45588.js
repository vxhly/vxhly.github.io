import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{o as e,c as n,d as t,a,e as l}from"./app-89f8fb1f.js";const i={},r=a("div",{class:"hint-container tip"},[a("p",{class:"hint-container-title"},"前言"),a("p",null,"最近在 ubuntu 系统上安装了 MySQL, 但是安装时没有提示输入 root 用户密码, 网上胡乱找了一通, 这才知道 MySQL 5.7 以上版本的 root 密码都是随机生成的, 所以这里提供解决 MySQL 5.7 版本的 root 用户重置密码问题。")],-1),p=l(`<h2 id="安装-mysql" tabindex="-1"><a class="header-anchor" href="#安装-mysql" aria-hidden="true">#</a> 安装 MySQL</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">apt-get</span> <span class="token function">install</span> mysql-cilent mysql-server 解决MySQL <span class="token number">5.7</span>版本的root用户重置密码问题
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装之后可以使用下面的命令来检查是否安装成功</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">netstat</span> <span class="token parameter variable">-tap</span> <span class="token operator">|</span> <span class="token function">grep</span> mysql
<span class="token function">netstat</span> <span class="token parameter variable">-tap</span> <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="登录-mysql" tabindex="-1"><a class="header-anchor" href="#登录-mysql" aria-hidden="true">#</a> 登录 MySQL</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输入密码, 如果可以进入则下面的不用看了；如果提示不能登入, 则我们尝试启用安全模式登入 MySQL, 这样可以绕过密码登入, 登入后再修改密码。</p><h2 id="修改密码" tabindex="-1"><a class="header-anchor" href="#修改密码" aria-hidden="true">#</a> 修改密码</h2><h3 id="修改配置文件" tabindex="-1"><a class="header-anchor" href="#修改配置文件" aria-hidden="true">#</a> 修改配置文件</h3><p><code>my.cnf</code> =&gt; 不同系统的配置文件名以及存放路径不一致, 但一定能在 <code>/etc/mysql</code> 里找到</p><p>在 [mysqld] 小节下添加一行, 这一行配置让 mysqld 启动时不对密码进行验证</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[mysqld]
skip - grant - tables = 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>修改完成之后保存重启 MySQL 服务</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/etc/init.d/mysql restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="无密码登录-mysql-修改密码" tabindex="-1"><a class="header-anchor" href="#无密码登录-mysql-修改密码" aria-hidden="true">#</a> 无密码登录 MySQL 修改密码</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>执行以下操作</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> use mysql<span class="token punctuation">;</span>
 mysql<span class="token operator">&gt;</span> update user <span class="token builtin class-name">set</span> <span class="token assign-left variable">authentication_string</span><span class="token operator">=</span>PASSWORD<span class="token punctuation">(</span><span class="token string">&quot;这里输入你要改的密码&quot;</span><span class="token punctuation">)</span> where <span class="token assign-left variable">User</span><span class="token operator">=</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">;</span><span class="token comment">#更改密码</span>
 mysql<span class="token operator">&gt;</span> update user <span class="token builtin class-name">set</span> <span class="token assign-left variable">plugin</span><span class="token operator">=</span><span class="token string">&quot;mysql_native_password&quot;</span><span class="token punctuation">;</span><span class="token comment">#如果没这一行可能也会报一个错误,因此需要运行这一行</span>
 mysql<span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span><span class="token comment">#更新所有操作权限</span>
 mysql<span class="token operator">&gt;</span> quit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="完成配置重启" tabindex="-1"><a class="header-anchor" href="#完成配置重启" aria-hidden="true">#</a> 完成配置重启</h3><p>删掉或者注释 <code>skip-grant-tables=1</code> 该行配置</p><p>修改完成之后保存重启 MySQL 服务</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/etc/init.d/mysql restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>之后使用设置的密码登录即可</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="附上完全卸载-mysql-命令" tabindex="-1"><a class="header-anchor" href="#附上完全卸载-mysql-命令" aria-hidden="true">#</a> 附上完全卸载 MySQL 命令</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">apt-get</span> autoremove mysql-*
 dpkg <span class="token parameter variable">-l</span> <span class="token operator">|</span><span class="token function">grep</span> ^rc<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&#39;{print $2}&#39;</span> <span class="token operator">|</span><span class="token function">sudo</span> <span class="token function">xargs</span> dpkg <span class="token parameter variable">-P</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,26);function d(o,c){return e(),n("div",null,[r,t(" more "),p])}const v=s(i,[["render",d],["__file","update-mysql-root-password.html.vue"]]);export{v as default};
