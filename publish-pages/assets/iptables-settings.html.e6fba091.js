import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";import{o as n,c as e,e as a}from"./app.f29ec3fb.js";var i="/assets/iptables-1.png",t="/assets/iptables-2.png",l="/assets/iptables-3.png",r="/assets/iptables-4.png",d="/assets/iptables-5.png";const o={},c=a(`<div class="custom-container tip"><p class="custom-container-title">\u524D\u8A00</p><p>\u672C\u7CFB\u5217\u7B14\u8BB0\u53C8\u662F Liunx \u5B66\u4E60\u7CFB\u5217\u6559\u7A0B\u7684\u4E00\u5927\u6B65, \u672C\u7CFB\u5217\u5B66\u4E60\u7B14\u8BB0\u8BB0\u5F55 RedHat \u7CFB\u7EDF\u7684\u5B89\u5168\u52A0\u56FA\u3002\u672C\u7BC7\u7B14\u8BB0\u8BB0\u5F55 RedHat \u4E0B\u7684\u9632\u706B\u8BF7\u7684\u5F00\u542F\u548C\u5173\u95ED, \u8FD8\u6709\u5141\u8BB8\u54EA\u4E9B\u7AEF\u53E3\u901A\u8FC7\u9632\u706B\u5899\u3002</p></div><h2 id="\u9632\u706B\u5899\u7684\u5F00\u542F\u548C\u5173\u95ED" tabindex="-1"><a class="header-anchor" href="#\u9632\u706B\u5899\u7684\u5F00\u542F\u548C\u5173\u95ED" aria-hidden="true">#</a> \u9632\u706B\u5899\u7684\u5F00\u542F\u548C\u5173\u95ED</h2><h3 id="\u6C38\u4E45\u6027\u751F\u6548" tabindex="-1"><a class="header-anchor" href="#\u6C38\u4E45\u6027\u751F\u6548" aria-hidden="true">#</a> \u6C38\u4E45\u6027\u751F\u6548</h3><p>\u4F7F\u7528 <code>chkconfig</code> , \u91CD\u542F\u540E\u4E0D\u4F1A\u590D\u539F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">chkconfig</span> iptables on         <span class="token comment"># \u5F00\u542F</span>
<span class="token function">chkconfig</span> iptables off        <span class="token comment"># \u5173\u95ED</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5373\u65F6\u751F\u6548" tabindex="-1"><a class="header-anchor" href="#\u5373\u65F6\u751F\u6548" aria-hidden="true">#</a> \u5373\u65F6\u751F\u6548</h3><p>\u4F7F\u7528 <code>service</code> , \u91CD\u542F\u540E\u590D\u539F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> iptables start        <span class="token comment"># \u5F00\u542F</span>
<span class="token function">service</span> iptables stop         <span class="token comment"># \u5173\u95ED</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="iptables-\u547D\u4EE4\u89E3\u91CA" tabindex="-1"><a class="header-anchor" href="#iptables-\u547D\u4EE4\u89E3\u91CA" aria-hidden="true">#</a> iptables \u547D\u4EE4\u89E3\u91CA</h2><h3 id="\u9009\u9879\u89E3\u91CA" tabindex="-1"><a class="header-anchor" href="#\u9009\u9879\u89E3\u91CA" aria-hidden="true">#</a> \u9009\u9879\u89E3\u91CA</h3><ul><li><strong>-t&lt;\u8868&gt;</strong>: \u6307\u5B9A\u8981\u64CD\u7EB5\u7684\u8868\uFF1B</li><li><strong>-A</strong>: \u5411\u89C4\u5219\u94FE\u4E2D\u6DFB\u52A0\u6761\u76EE\uFF1B</li><li><strong>-D</strong>: \u4ECE\u89C4\u5219\u94FE\u4E2D\u5220\u9664\u6761\u76EE\uFF1B</li><li><strong>-I</strong>: \u5411\u89C4\u5219\u94FE\u4E2D\u63D2\u5165\u6761\u76EE\uFF1B</li><li><strong>-R</strong>: \u66FF\u6362\u89C4\u5219\u94FE\u4E2D\u7684\u6761\u76EE\uFF1B</li><li><strong>-L</strong>: \u663E\u793A\u89C4\u5219\u94FE\u4E2D\u5DF2\u6709\u7684\u6761\u76EE\uFF1B</li><li><strong>-F</strong>: \u6E05\u695A\u89C4\u5219\u94FE\u4E2D\u5DF2\u6709\u7684\u6761\u76EE\uFF1B</li><li><strong>-Z</strong>: \u6E05\u7A7A\u89C4\u5219\u94FE\u4E2D\u7684\u6570\u636E\u5305\u8BA1\u7B97\u5668\u548C\u5B57\u8282\u8BA1\u6570\u5668\uFF1B</li><li><strong>-N</strong>: \u521B\u5EFA\u65B0\u7684\u7528\u6237\u81EA\u5B9A\u4E49\u89C4\u5219\u94FE\uFF1B</li><li><strong>-P</strong>: \u5B9A\u4E49\u89C4\u5219\u94FE\u4E2D\u7684\u9ED8\u8BA4\u76EE\u6807\uFF1B</li><li><strong>-h</strong>: \u663E\u793A\u5E2E\u52A9\u4FE1\u606F\uFF1B</li><li><strong>-p</strong>: \u6307\u5B9A\u8981\u5339\u914D\u7684\u6570\u636E\u5305\u534F\u8BAE\u7C7B\u578B\uFF1B</li><li><strong>-s</strong>: \u6307\u5B9A\u8981\u5339\u914D\u7684\u6570\u636E\u5305\u6E90 ip \u5730\u5740\uFF1B</li><li><strong>-j&lt;\u76EE\u6807&gt;</strong>: \u6307\u5B9A\u8981\u8DF3\u8F6C\u7684\u76EE\u6807\uFF1B</li><li><strong>-i&lt;\u7F51\u7EDC\u63A5\u53E3&gt;</strong>: \u6307\u5B9A\u6570\u636E\u5305\u8FDB\u5165\u672C\u673A\u7684\u7F51\u7EDC\u63A5\u53E3\uFF1B</li><li><strong>-o&lt;\u7F51\u7EDC\u63A5\u53E3&gt;</strong>: \u6307\u5B9A\u6570\u636E\u5305\u8981\u79BB\u5F00\u672C\u673A\u6240\u4F7F\u7528\u7684\u7F51\u7EDC\u63A5\u53E3\u3002</li></ul><h3 id="\u547D\u4EE4\u8F93\u5165\u987A\u5E8F" tabindex="-1"><a class="header-anchor" href="#\u547D\u4EE4\u8F93\u5165\u987A\u5E8F" aria-hidden="true">#</a> \u547D\u4EE4\u8F93\u5165\u987A\u5E8F</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>iptables -t \u8868\u540D <span class="token operator">&lt;</span>-A/I/D/R<span class="token operator">&gt;</span> \u89C4\u5219\u94FE\u540D <span class="token punctuation">[</span>\u89C4\u5219\u53F7<span class="token punctuation">]</span> <span class="token operator">&lt;</span>-i/o \u7F51\u5361\u540D<span class="token operator">&gt;</span> -p \u534F\u8BAE\u540D <span class="token operator">&lt;</span>-s \u6E90IP/\u6E90\u5B50\u7F51<span class="token operator">&gt;</span> --sport \u6E90\u7AEF\u53E3 <span class="token operator">&lt;</span>-d \u76EE\u6807IP/\u76EE\u6807\u5B50\u7F51<span class="token operator">&gt;</span> --dport \u76EE\u6807\u7AEF\u53E3 -j \u52A8\u4F5C
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>\u8868\u540D\u5305\u62EC</strong></li></ul><p>-- <strong>raw</strong>: \u9AD8\u7EA7\u529F\u80FD, \u5982: \u7F51\u5740\u8FC7\u6EE4\u3002 -- <strong>mangle</strong>: \u6570\u636E\u5305\u4FEE\u6539\uFF08QOS\uFF09, \u7528\u4E8E\u5B9E\u73B0\u670D\u52A1\u8D28\u91CF\u3002 -- <strong>net</strong>: \u5730\u5740\u8F6C\u6362, \u7528\u4E8E\u7F51\u5173\u8DEF\u7531\u5668\u3002 -- <strong>filter</strong>: \u5305\u8FC7\u6EE4, \u7528\u4E8E\u9632\u706B\u5899\u89C4\u5219\u3002</p><ul><li><strong>\u89C4\u5219\u94FE\u540D\u5305\u62EC</strong></li></ul><p>-- <strong>INPUT \u94FE</strong>: \u5904\u7406\u8F93\u5165\u6570\u636E\u5305\u3002 -- <strong>OUTPUT \u94FE</strong>: \u5904\u7406\u8F93\u51FA\u6570\u636E\u5305\u3002 -- <strong>PORWARD \u94FE</strong>: \u5904\u7406\u8F6C\u53D1\u6570\u636E\u5305\u3002 -- <strong>PREROUTING \u94FE</strong>: \u7528\u4E8E\u76EE\u6807\u5730\u5740\u8F6C\u6362\uFF08DNAT\uFF09\u3002 -- <strong>POSTOUTING \u94FE</strong>: \u7528\u4E8E\u6E90\u5730\u5740\u8F6C\u6362\uFF08SNAT\uFF09\u3002</p><ul><li><strong>\u52A8\u4F5C\u5305\u62EC</strong></li></ul><p>-- <strong>ACCEPT</strong>: \u63A5\u6536\u6570\u636E\u5305\u3002 -- <strong>DROP</strong>: \u4E22\u5F03\u6570\u636E\u5305\u3002 -- <strong>REDIRECT</strong>: \u91CD\u5B9A\u5411\u3001\u6620\u5C04\u3001\u900F\u660E\u4EE3\u7406\u3002 -- <strong>SNAT</strong>: \u6E90\u5730\u5740\u8F6C\u6362\u3002 -- <strong>DNAT</strong>: \u76EE\u6807\u5730\u5740\u8F6C\u6362\u3002 -- <strong>MASQUERADE</strong>: IP \u4F2A\u88C5\uFF08NAT\uFF09, \u7528\u4E8E ADSL\u3002 -- <strong>LOG</strong>: \u65E5\u5FD7\u8BB0\u5F55\u3002</p><h2 id="iptables-\u7684\u8BBE\u7F6E\u4E0E\u67E5\u770B" tabindex="-1"><a class="header-anchor" href="#iptables-\u7684\u8BBE\u7F6E\u4E0E\u67E5\u770B" aria-hidden="true">#</a> iptables \u7684\u8BBE\u7F6E\u4E0E\u67E5\u770B</h2><h3 id="\u67E5\u770B-iptables-\u7684\u8BBE\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B-iptables-\u7684\u8BBE\u7F6E" aria-hidden="true">#</a> \u67E5\u770B iptables \u7684\u8BBE\u7F6E</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>iptables -nL
<span class="token function">service</span> iptables status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+i+`" alt="iptables \u7684\u8BBE\u7F6E\u4E0E\u67E5\u770B"></p><h3 id="\u6E05\u9664\u5DF2\u6709-iptables-\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#\u6E05\u9664\u5DF2\u6709-iptables-\u89C4\u5219" aria-hidden="true">#</a> \u6E05\u9664\u5DF2\u6709 iptables \u89C4\u5219</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>iptables -F
iptables -X
iptables -Z
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+t+`" alt="iptables \u7684\u8BBE\u7F6E\u4E0E\u67E5\u770B"></p><h3 id="\u5F00\u653E\u6307\u5B9A\u7684\u7AEF\u53E3" tabindex="-1"><a class="header-anchor" href="#\u5F00\u653E\u6307\u5B9A\u7684\u7AEF\u53E3" aria-hidden="true">#</a> \u5F00\u653E\u6307\u5B9A\u7684\u7AEF\u53E3</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>iptables -A INPUT -s <span class="token number">127.0</span>.0.1 -d <span class="token number">127.0</span>.0.1 -j ACCEPT
<span class="token comment"># \u5141\u8BB8\u672C\u5730\u56DE\u73AF\u63A5\u53E3(\u5373\u8FD0\u884C\u672C\u673A\u8BBF\u95EE\u672C\u673A)</span>

iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
<span class="token comment"># \u5141\u8BB8\u5DF2\u5EFA\u7ACB\u7684\u6216\u76F8\u5173\u8FDE\u7684\u901A\u884C</span>

iptables -A OUTPUT -j ACCEPT
<span class="token comment"># \u5141\u8BB8\u6240\u6709\u672C\u673A\u5411\u5916\u7684\u8BBF\u95EE</span>

iptables -A INPUT -p tcp --dport <span class="token number">22</span> -j ACCEPT
<span class="token comment"># \u5141\u8BB8\u8BBF\u95EE 22 \u7AEF\u53E3</span>

iptables -A INPUT -p tcp --dport <span class="token number">80</span> -j ACCEPT
<span class="token comment"># \u5141\u8BB8\u8BBF\u95EE 80 \u7AEF\u53E3</span>

iptables -A INPUT -p tcp --dport <span class="token number">21</span> -j ACCEPT
<span class="token comment"># \u5141\u8BB8 FTP  \u670D\u52A1\u7684 21 \u7AEF\u53E3</span>

iptables -A INPUT -p tcp --dport <span class="token number">20</span> -j ACCEPT
<span class="token comment"># \u5141\u8BB8 FTP \u670D\u52A1\u7684 20 \u7AEF\u53E3</span>

iptables -A INPUT -j reject
<span class="token comment"># \u7981\u6B62\u5176\u4ED6\u672A\u5141\u8BB8\u7684\u89C4\u5219\u8BBF\u95EE</span>

iptables -A FORWARD -j REJECT
<span class="token comment"># \u7981\u6B62\u5176\u4ED6\u672A\u5141\u8BB8\u7684\u89C4\u5219\u8BBF\u95EE</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p><code>-A</code> \u662F\u5728 <code>iptables</code> \u7684\u6700\u540E\u6DFB\u52A0\u4E00\u6761\u89C4\u5219, <code>-I</code> \u662F\u5728 <code>iptables</code> \u7684\u524D\u9762\u6DFB\u52A0\u4E00\u6761\u89C4\u5219</p></div><p><img src="`+l+`" alt="iptables \u7684\u8BBE\u7F6E\u4E0E\u67E5\u770B"></p><h3 id="\u5C4F\u853D-ip" tabindex="-1"><a class="header-anchor" href="#\u5C4F\u853D-ip" aria-hidden="true">#</a> \u5C4F\u853D IP</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>iptables -I INPUT -s <span class="token number">123.45</span>.6.7 -j DROP
<span class="token comment"># \u5C4F\u853D\u5355\u4E2A IP \u7684\u547D\u4EE4</span>

iptables -I INPUT -s <span class="token number">123.0</span>.0.0/8 -j DROP
<span class="token comment"># \u5C01\u6574\u4E2A\u6BB5\u5373\u4ECE 123.0.0.1 \u5230 123.255.255.254 \u7684\u547D\u4EE4</span>

iptables -I INPUT -s <span class="token number">124.45</span>.0.0/16 -j DROP
<span class="token comment"># \u5C01 IP \u6BB5\u5373\u4ECE 123.45.0.1 \u5230 123.45.255.254 \u7684\u547D\u4EE4</span>

iptables -I INPUT -s <span class="token number">123.45</span>.6.0/24 -j DROP
<span class="token comment"># \u5C01 IP \u6BB5\u5373\u4ECE 123.45.6.1 \u5230 123.45.6.254 \u7684\u547D\u4EE4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u4FDD\u5B58\u5F53\u524D\u8BBE\u7F6E\u7684\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#\u4FDD\u5B58\u5F53\u524D\u8BBE\u7F6E\u7684\u89C4\u5219" aria-hidden="true">#</a> \u4FDD\u5B58\u5F53\u524D\u8BBE\u7F6E\u7684\u89C4\u5219</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/etc/rc.d/init.d/iptables save
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+r+'" alt="iptables \u7684\u8BBE\u7F6E\u4E0E\u67E5\u770B"></p><br><p><img src="'+d+'" alt="iptables \u7684\u8BBE\u7F6E\u4E0E\u67E5\u770B"></p>',37),p=[c];function b(v,m){return n(),e("div",null,p)}var h=s(o,[["render",b],["__file","iptables-settings.html.vue"]]);export{h as default};
